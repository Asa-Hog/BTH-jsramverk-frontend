{"ast":null,"code":"// const docs = {\n//     getAllDocs: async function getAllDocs() {\n//         const response = await fetch(`${URL}/docs`);\n//         const result = await response.json();\n//         return result.data;\n//     },\n// };\n// export default docs;\nvar express = require('express');\n\nvar router = express.Router(); // MongoDB\n\nconst mongo = require(\"mongodb\").MongoClient;\n\nconst dsn = process.env.DBWEBB_DSN || \"mongodb://localhost:27017/mumin\"; // Return a JSON object with list of all documents within the collection.\n\nrouter.get(\"/\", async (request, response) => {\n  try {\n    let res = await findInCollection(dsn, \"crowd\", {}, {}, 0);\n    console.log(res);\n    response.json(res); // Jämför med res.json(data); nedan\n  } catch (err) {\n    console.log(err);\n    response.json(err);\n  }\n});\n\nasync function findInCollection(dsn, colName, criteria, projection, limit) {\n  const client = await mongo.connect(dsn);\n  const db = await client.db();\n  const col = await db.collection(colName);\n  const res = await col.find(criteria, projection).limit(limit).toArray();\n  await client.close();\n  return res;\n} // router.get('/', function(req, res, next) {\n//     const data = {\n//         data: {\n//             msg: \"Hello World\"\n//         }\n//     };\n//     res.json(data);\n// });\n\n\nmodule.exports = router;","map":{"version":3,"names":["express","require","router","Router","mongo","MongoClient","dsn","process","env","DBWEBB_DSN","get","request","response","res","findInCollection","console","log","json","err","colName","criteria","projection","limit","client","connect","db","col","collection","find","toArray","close","module","exports"],"sources":["C:/Users/asa_h/Desktop/bth/jsramverk/frontend/texteditor/src/models/docs.js"],"sourcesContent":["// const docs = {\n//     getAllDocs: async function getAllDocs() {\n//         const response = await fetch(`${URL}/docs`);\n//         const result = await response.json();\n\n//         return result.data;\n//     },\n// };\n\n// export default docs;\n\n\n\n\nvar express = require('express');\nvar router = express.Router();\n\n // MongoDB\n const mongo = require(\"mongodb\").MongoClient;\n const dsn =  process.env.DBWEBB_DSN || \"mongodb://localhost:27017/mumin\";\n \n // Return a JSON object with list of all documents within the collection.\n router.get(\"/\", async (request, response) => {\n     try {\n         let res = await findInCollection(dsn, \"crowd\", {}, {}, 0);\n\n         console.log(res);\n         response.json(res); // Jämför med res.json(data); nedan\n     } catch (err) {\n         console.log(err);\n         response.json(err);\n     }\n });\n \n async function findInCollection(dsn, colName, criteria, projection, limit) {\n     const client  = await mongo.connect(dsn);\n     const db = await client.db();\n     const col = await db.collection(colName);\n     const res = await col.find(criteria, projection).limit(limit).toArray();\n \n     await client.close();\n \n     return res;\n }\n\n// router.get('/', function(req, res, next) {\n//     const data = {\n//         data: {\n//             msg: \"Hello World\"\n//         }\n//     };\n\n//     res.json(data);\n// });\n\nmodule.exports = router;\n"],"mappings":"AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAKA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb,C,CAEC;;AACA,MAAMC,KAAK,GAAGH,OAAO,CAAC,SAAD,CAAP,CAAmBI,WAAjC;;AACA,MAAMC,GAAG,GAAIC,OAAO,CAACC,GAAR,CAAYC,UAAZ,IAA0B,iCAAvC,C,CAEA;;AACAP,MAAM,CAACQ,GAAP,CAAW,GAAX,EAAgB,OAAOC,OAAP,EAAgBC,QAAhB,KAA6B;EACzC,IAAI;IACA,IAAIC,GAAG,GAAG,MAAMC,gBAAgB,CAACR,GAAD,EAAM,OAAN,EAAe,EAAf,EAAmB,EAAnB,EAAuB,CAAvB,CAAhC;IAEAS,OAAO,CAACC,GAAR,CAAYH,GAAZ;IACAD,QAAQ,CAACK,IAAT,CAAcJ,GAAd,EAJA,CAIoB;EACvB,CALD,CAKE,OAAOK,GAAP,EAAY;IACVH,OAAO,CAACC,GAAR,CAAYE,GAAZ;IACAN,QAAQ,CAACK,IAAT,CAAcC,GAAd;EACH;AACJ,CAVD;;AAYA,eAAeJ,gBAAf,CAAgCR,GAAhC,EAAqCa,OAArC,EAA8CC,QAA9C,EAAwDC,UAAxD,EAAoEC,KAApE,EAA2E;EACvE,MAAMC,MAAM,GAAI,MAAMnB,KAAK,CAACoB,OAAN,CAAclB,GAAd,CAAtB;EACA,MAAMmB,EAAE,GAAG,MAAMF,MAAM,CAACE,EAAP,EAAjB;EACA,MAAMC,GAAG,GAAG,MAAMD,EAAE,CAACE,UAAH,CAAcR,OAAd,CAAlB;EACA,MAAMN,GAAG,GAAG,MAAMa,GAAG,CAACE,IAAJ,CAASR,QAAT,EAAmBC,UAAnB,EAA+BC,KAA/B,CAAqCA,KAArC,EAA4CO,OAA5C,EAAlB;EAEA,MAAMN,MAAM,CAACO,KAAP,EAAN;EAEA,OAAOjB,GAAP;AACH,C,CAEF;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;AAEAkB,MAAM,CAACC,OAAP,GAAiB9B,MAAjB"},"metadata":{},"sourceType":"module"}